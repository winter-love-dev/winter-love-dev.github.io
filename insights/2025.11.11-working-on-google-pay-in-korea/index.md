---
insightPostId: working-on-google-pay-in-korea
insightPrivate: false
insightTitle: 구글페이가 안 되는 나라에서 구글페이 구현작업 하는 안드로이드 개발자의 잡다한 인사이트 With Stripe
insightDate: '2025-11-11 00:10:00'
insightTags: ['잡담', 'Android', 'GooglePay']
insightThumbnail: 'cover.png'
---

시련이 찾아왔다. 한국은 구글페이를 지원하지 않는데 구글페이 구현 작업을 해야된다니. 
한국에서 외국 서비스를 개발하다 겪게되는 시나리오중 하나가 아닐까 싶다. 

혹시 나와 비슷한 처지의 누군가가 있다면 조금이라도 도움이 되길.

Stripe 라는 외국 결제 중개 서비스를 사용하고 있다. 
이곳 SDK 에 구글페이 핵심 구현이 다 wrapping 되어있기 때문에 
나는 그냥 구글월렛 콘솔에서 사업체 등록과 구글페이 관련 몇가지 연동 작업 + 
구글 측의 간단한 심사 과정만 통과하면 테스트 레벨부터 프로덕 레벨까지 구글페이를 실행할 수 있게 된다.

이후 잘 동작하는 구글페이를 앱쪽 피처 연계만 잘 하면 되는데 이렇게 정리해놓고 보니 시련이었나? 싶다. 
회사원으로서는 소소한 시련이었던 것 같고, 개인으로선 큰 장벽일듯 하다. 나는 전자의 케이스다. 
먼 과거까지 되돌아가서 어떤 과정들이 있었나 되돌아보자. 

관련 문서들을 살펴봤다.
먼저 살펴본 [Stripe 측 가이드 문서](https://docs.stripe.com/google-pay?platform=android) 를 읽다보면 나를 냅다 
[구글페이 관련 공식 설명문서](https://developers.google.com/pay/api/android/guides/setup) 로 리다이렉팅 시킨다.
여기서 우리 프로젝트에 해줘야 할 첫 번 째 기초적인 설정들에 대해 알 수 있게 된다.
문서 가이드대로 프로젝트쪽 설정을 해주자.

그리고 [구글 월렛 콜솔](https://pay.google.com/business/console/) 이라는 관리 콘솔의 존재를 인지하게 된다.
월렛 콘솔에 처음 접속하면 사업체 등록을 해야되는데 이건 내가 해야될 영역이 아니기 때문에 다른 관계자에게 등록을 부탁드렸다.
이후 관리 멤버로 초대 받아야 콘솔에 접속할 수 있게 되고 여기부터는 내가 Google Pay API 관련 설정들을 딸깍 딸깍 조작해주면 된다.

월렛 콘솔에서 우리가 출시한 앱 목록들이 표시되는데
프로덕 레벨에서 구글페이를 사용하려면 앱마다 간단한 심사 과정을 거쳐줘야 한다. 
일단 이 시점엔 구글페이가 앱과 피처 연동 작업이 다 되어 있어야 심사를 진행할 수 있다.
구글페이가 우리 서비스에서 어떤 유즈케이스로 작동하는지 캡쳐 이미지를 제출 해야되기 때문이다.

1️⃣ 사용자가 항목이나 서비스를 탐색할 때,
2️⃣ 사용자가 최종적으로 구매할 준비가 되었을 때,
3️⃣ 사용자가 결제 방법으로 Google Pay를 선택하는 경우,
4️⃣ 이후 실제로 구글페이가 실행되는 장면,
5️⃣ 결제 결과 장면... 심사 화면에 다섯가지 사진을 첨부해야 하는데 
4번은 온갖 방법의 스크린 캡처를 다 막아놨기 때문에 다른 카메라로 직접 찍어줘야 한다. 
심사를 제출하기 위한 몇 가지 프로세스를 다 통과하면 몇 시간 ~ 하루만에 구글페이 사용 승인이 완료된다.

프로덕 레벨에서의 구글페이는 release용 signing key 로 빌드된 앱에서만 실행 된다는 사실.
현금 결제 테스트를 앞둔 코리안은 "왜 구글페이가 실행이 안되지?" 의 삽질과 고민의 타임을 한 뎁스 줄이길 바란다.

여기까지가 구글페이를 사용하기 위한 전체적인 큰 흐름에 대한 이야기다.
이제 테스트 레벨에서 해야될 일들을 얘기 하자면 일단 준비물은 
1️⃣ **구글페이를 지원하는 국가의 계정**, 
2️⃣ **구글페이를 지원하는 국가의 신용카드**, 
3️⃣ **휴대폰 실기기에 구글 월렛 앱 설치하기**
4️⃣ **VPN 앱**
작업자가 각자 처한 환경에 따라 큰 시련일수도 있는 그런 준비물들이다.

일단 계정 만드는것 부터가 문제다. 
해당 국가의 휴대폰으로 본인인증을 요구하기 때문에 테스트용 더미 데이터를 쉽게 생성할 수 있는 구조가 아니다.
인증을 통과하고 계정을 만들면 휴대폰에 [구글 월렛 앱을 설치](https://play.google.com/store/apps/details?id=com.google.android.apps.walletnfcrel)할 수 있게 된다.
한국 계정으로는 다운로드가 아예 막혀있기 때문에 한국 사람은 가입을 할 수 없다.
외국 계정으로 플레이스토어에 접근해도 일단은 다운로드 버튼이 활성화 되지 않는다.
이 때 VPN 앱으로 휴대폰의 네트워크를 구글페이가 지원되는 국가로 변경해줘야 한다.
몇 번 시도하다 보면 구글 월렛 앱 다운로드 버튼이 활성화 되어서 다운로드 받을수 있게된다.
구글월렛 앱을 실행했으면 신용카드를 등록해주자.
테스트 레벨의 작업자에게 신용카드가 왜 필요한가?
구글페이는 휴대폰에 설치된 구글월렛을 통해 실행되고, 
이 때 등록된 신용카드가 없으면 테스트 환경인데도 테스트용 신용카드가 제공되지 않는다.
아니 그 전에 우리 앱에서 구글페이 실행 요청을 하면 exception 이 발생한다.
해당 exception 을 캐치해서 "구글 월렛 앱에 결제 수단을 등록해주세요" 라는 UX 예외 처리를 해주자.

아무튼 앞의 과정들을 모두 마쳐야 비로소 가능한것이 이 구글페이 테스트 되시겠다.
공개적으로 이야기 할 수 있는 과정들은 다 풀어낸 거 같다. 
지금 시점에 와서야 일련의 과정들을 술술 얘기할 수 있는거지.
당시엔 정보들이 여기저기 워낙 파편화 되었다고 느껴져서 이렇게 정보들을 하나로 통합하기까진 쉽지 않았다.
한국에서 이런 트러블 슈팅을 하는 사람도 있다는 사실. 
비슷한 처지의 누군가가 있다면 도움이 되길.

마지막으로 소스코드 레벨의 이야기를 좀 해보자면, 
로직상으론 `com.google.android.gms.wallet` 쪽 코드로 구글페이 사용한 가능한 디바이스인지 체크해볼 수 있다.
이후 스트라이프 SDK 로 구현된 구글페이를 호출하면 되는데 내가 사용한 컴포즈 코드를 Stripe 문서엔 잘 안 나와있는것 같다.
나는 `rememberGooglePayLauncher` 를 사용했고 `presentForPaymentIntent` 로 구글월렛을 호출해서 구글페이가 실행되게 만들었다.

이 글의 맥락에선 잡지식일 수 있는데 payment intent 는 
"고객의 한 번의 구매 세션에 대한 결제" 이라는 의미의 결제고, 
setup intent 는 "나중에 결제하기 위해 결제수단만 미리 등록해두는 것" 대충 이런 의미의 결제이다.
예를 들어 구독 서비스에서 카드 정보만 먼저 받아두고 매달 자동결제 하는 경우가 setup intent 결제 방식인 것.
Stripe 에서 분류한 결제 방식이며, 다른 결제 시스템에서도 비슷한 개념을 사용한다. 용어까지 다 일치하는진 모르겠지만.

잡지식 2: 
올해 1~2분기 쯤 내 업무상 필요에 의해 스트라이프 Android SDK github 레포에 
내가 직접 이슈 글과 간단한 수정사항의 PR 을 등록한적이 있다.
자기들 업무 로드맵에 추가 해두겠다 말해놓고 올해 말이 된 지금까지 반영이 되지 않고 있다. 😡
로직상으로도, 비즈니스 상으로도 딱히 임팩트 있을만한 될 수정사항은 아닌거 같았는데. 

![](./cover.png)
